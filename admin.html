<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<script>
  const expiry = localStorage.getItem("adminExpiry");

  if (
    localStorage.getItem("adminAuth") !== "true" ||
    !expiry ||
    Date.now() > expiry
  ) {
    localStorage.clear();
    location.href = "login.html";
  }
</script>

<div class="admin-panel">
  <h2>Admin Panel</h2>

  <input id="ipInput" placeholder="Minecraft Server IP">
  <input id="refreshInput" type="number" min="5" placeholder="Refresh interval (seconds)">
  <input id="discordInput" placeholder="Discord Widget URL">

  <button class="btn" onclick="saveSettings()">Save Settings</button>
  <button class="btn small" onclick="logout()">Logout</button>

  <p id="saved"></p>
</div>

<script>
  const ipInput = document.getElementById("ipInput");
  const refreshInput = document.getElementById("refreshInput");
  const discordInput = document.getElementById("discordInput");
  const saved = document.getElementById("saved");

  ipInput.value = localStorage.getItem("serverIP") || "play.minegg.net";
  refreshInput.value = localStorage.getItem("refreshInterval") || 30;
  discordInput.value = localStorage.getItem("discordWidget") || "";

  function saveSettings() {
    localStorage.setItem("serverIP", ipInput.value.trim());
    localStorage.setItem("refreshInterval", refreshInput.value);
    localStorage.setItem("discordWidget", discordInput.value.trim());

    saved.textContent = "Saved âœ”";
    saved.style.color = "#22c55e";

    setTimeout(() => saved.textContent = "", 2000);
  }

  function logout() {
    localStorage.clear();
    location.href = "login.html";
  }
</script>

</body>
</html>
